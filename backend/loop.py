import time
from dboperations import DB
from city import City
from tweepy import TweepError

TORONTO_POSTS = DB.toronto
MONTREAL_POSTS = DB.montreal
VANCOUVER_POSTS = DB.vancouver
CALGARY_POSTS = DB.calgary
OTTAWA_POSTS = DB.ottawa
EDMONTON_POSTS = DB.edmonton
WINNIPEG_POSTS = DB.winipeg
HAMILTON_POSTS = DB.hamilton
KITCHENER_POSTS = DB.kitchener

TORONTO_GEOBOX = [-79.6618652344, 43.6206676968, -79.1551208496, 43.9676155989]
MONTREAL_GEOBOX = [-73.9709472656, 45.4059660631, -73.480682373, 45.7028226095]
VANCOUVER_GEOBOX = [-123.267288208, 49.025712751, -122.7722167969, 49.3624767459]
CALGARY_GEOBOX = [-114.2713599, 50.842404, -113.8769511, 51.18383]
OTTAWA_GEOBOX = [-76.0940551758, 45.2086498794, -75.2465979, 45.5375801]
EDMONTON_GEOBOX = [-113.7147381, 53.395655, -113.2731591, 53.7160999]
WINNIPEG_GEOBOX = [-97.349222, 49.71377, -96.9552281, 49.9938741]
HAMILTON_GEOBOX = [-80.2487071, 43.0505639, -79.6175911, 43.4710569]
KITCHENER_GEOBOX = [-80.5741051, 43.3538599, -80.3785251, 43.5070088]

RADIUS = 10

TORONTO = City("Toronto", 43.6532, -79.3832, RADIUS, TORONTO_POSTS,
               TORONTO_GEOBOX)
MONTREAL = City("Montreal", 45.5017, -73.5673, RADIUS, MONTREAL_POSTS,
                MONTREAL_GEOBOX)
VANCOUVER = City("Vancouver", 49.2827, -123.1207, RADIUS, VANCOUVER_POSTS,
                 VANCOUVER_GEOBOX)
CALGARY = City("Calgary", 51.0486, -114.0708, RADIUS, CALGARY_POSTS,
               CALGARY_GEOBOX)
OTTAWA = City("Ottawa", 45.4215, -75.6972, RADIUS, OTTAWA_POSTS,
              OTTAWA_GEOBOX)
EDMONTON = City("Edmonton", 53.5444, -113.4909, RADIUS, EDMONTON_POSTS,
                EDMONTON_GEOBOX)
WINNIPEG = City("Winnipeg", 49.8951, -97.1384, RADIUS, WINNIPEG_POSTS,
                WINNIPEG_GEOBOX)
HAMILTON = City("Hamilton", 43.2557, -79.8711, RADIUS, HAMILTON_POSTS,
                HAMILTON_GEOBOX)
KITCHENER = City("Kitchener", 43.4503, -80.4832, RADIUS, KITCHENER_POSTS,
                 KITCHENER_GEOBOX)

CITIES = [TORONTO, MONTREAL, VANCOUVER, CALGARY, OTTAWA, EDMONTON,
          WINNIPEG, HAMILTON, KITCHENER]

def main_loop():
    for city in CITIES:
        city.search_for_tweets_and_save()
        print "Search and save worked!"
        city.count_tweets()
        print "main_loop worked"
        time.sleep(10)

main_loop()
